# EDA #level2: Lequel?

## Integrantes del grupo y contribución al trabajo de cada integrante

* [Sofia Nasello]: [Definicion de algunas de las funciones de Lequel.cpp, escritura del read me, implementacion del bonus point: 3 idiomas nuevos]

* [Enzo Nicolás Rosa Fernandez]: [Definicion de algoritmos de comparacion adicional e iteracion nativa UTF-8, disenio de interfaz grafica, adicion de restricciones modificables]


## Respuestas del enunciado

1. ¿En qué idioma está el siguiente texto?

історія земель сучасної України, українського народу та інших національностей, що проживають на території України, від доісторичних часів до сьогодення.

El texto esta en ucraniano.

2. ¿En qué idioma está el siguiente texto?

아리랑, 아리랑, 아라리요... 아리랑 고개로 넘어간다. 나를 버리고 가시는 님은 십리도 못가서 발병난다. 청천하늘엔 잔별도 많고, 우리네 가슴엔 희망도 많다. 저기 저 산이 백두산이라지, 동지 섣달에도 꽃만 핀다.

El texto esta en coreano.

3. ¿En qué idioma está el siguiente texto?

၁၉၄၀ ခုနှစ်တွင် ဗိုလ်ချုပ်အောင်ဆန်းဦးဆောင်သည့် ရဲဘော်သုံးကျိပ်အဖွဲ့ဝင်တို့သည် ဗမာ့လွတ်မြောက်ရေးတပ်မတော် (ဘီအိုင်အေ) ကို တည်ထောင်ခဲ့ကြသည်။[၂၀][၂၀] ရဲဘော်သုံးကျိပ်သည် ဂျပန်နိုင်ငံတွင် စစ်သင်တန်းများတက်ရောက်ခဲ့ကြသည်။[၂၀]

El texto esta en birmano.

4. ¿En qué idioma está el siguiente texto?

Negema wangu binti, mchachefu wa sanati upulike wasiati asa ukanzingatia. Maradhi yamenshika hatta yametimu mwaka sikupata kutamka neno lema kukwambia. Ndoo mbee ujilisi na wino na qaratasi moyoni nina hadithi nimependa kukwambia.

El texto esta en suajili.

5. ¿En qué idioma está el siguiente texto?

Այժմ նա յուր կինտոյի արհեստով ժառանգած Ճանճուր մականունը կցելով յուր հոր՝ Օհանեսի անվան հետ, կոչվում է «Թիֆլիսի պատվավոր քաղաքացի Ճանճուր Իվանիչ»։ Այդ անունով ևս մենք պարտավորվում ենք նրան ծանոթացնել մեր ընթերցողներին։

El texto esta en armenio.

6. ¿En qué idioma está el siguiente texto?

Belirli bir bölgedeki mevcut hava durumu hava raporu, gelecekte beklenen durumlar ise hava tahmini şeklinde, ilgili meteoroloji otoriteleri tarafından yayımlanır.

El texto esta en turco.

7. ¿En qué idioma está el siguiente texto?

ᎤᎵᏍᏔᏴᏗ ᎦᎵᏙᏗ ᏭᎷᏤᎢ, ᎤᏗᏔᎮ ᎦᏁᎲ, ᎤᏲᏏᏍᎩ ᎤᏗᏔᎮ ᎤᏅᏗ ᏃᎴ ᎤᎩᏍᏙᎡ ᏑᎾᎴ ᎠᎩᏍᏗ ᎤᏂᏑᎸᏓ. ᎣᏍᏓ ᏄᎵᏍᏔᏁᎮ ᎤᏩᏌ ᎤᏪᏅᏒ ᎡᏙᎲ. ᎦᏅᏆᎶᏍᏗ ᏭᏴᎮ ᏣᏄᏏ ᏃᎴ ᏣᏁᎳ ᎠᏂᏎᏂᏏ ᏴᎩ, ᎣᏍᏓ ᏄᏩᏁᎴ ᎠᏦᏴ.

El texto esta en cheroqui.

8. ¿En qué idioma está el siguiente texto?

ُیعتقد بأن ضابطة في الجیش البریطاني تدعى بریت تشاندي أصبحت أولامرأة من أصول آسیویة ُتكملُ رحلة استكشافیة فردیة عبر .القارة القطبیة الجنوبی

El texto esta en arabe.

9. ¿En qué idioma está el siguiente texto?

ગુજરાતી સંસ્કૃત ભાષામાંથી વિકસિત થયેલી આધુનિક ઈન્ડો-આર્યન ભાષા છે. પરંપરાગત રીતે ૩ ઐતિહાસિક તબક્કાઓ પ્રમાણે ઈન્ડો-આર્યન ભાષાઓ વચ્ચે ભેદ કરાય છે.

El texto esta en guyarati.

10. ¿En qué idioma está el siguiente texto?

Al Seicento appartiene il primo trattato dedicato non ai volgari italiani o a uno o più di tali volgari, ma alla lingua italiana in quanto tale: Delle osservazioni della lingua italiana di Marcantonio Mambelli, detto il Cinonio.

El texto esta en italiano.

11. El siguiente texto fue escrito por Robert Burns en escocés. ¿Qué dice Lequel? ¿Qué falla? Justifica por qué ocurre lo que ocurre.

And there's a hand, my trusty fiere! and gie's a hand o' thine! And we’ll tak' a right gude-willie waught, for auld lang syne.

El idioma que detecto Lequel fue ingles.
El texto corresponde al dialecto escocés, que contiene palabras y construcciones distintas del inglés estándar, como “gies”, “fiere” y “waught”. Sin embargo, el detector Lequel lo clasifica como inglés. Esto ocurre porque Lequel se basa en trigramas de caracteres y en la frecuencia relativa de combinaciones de letras. Dado que muchas palabras escocesas comparten raíces con el inglés, los trigramas se parecen mucho a los del inglés estándar. Además, al ser el texto una sola oración, el modelo tiene menos datos independientes para calcular probabilidades, lo que aumenta la posibilidad de confusión y hace que la predicción se incline hacia el idioma más cercano estadísticamente. Por lo tanto, el fallo se debe tanto a la similitud lingüística con el inglés como a la limitación de trabajar con un texto único y extenso.


12. El siguiente texto está en inglés. ¿Qué dice Lequel? ¿Qué falla? Justifica por qué ocurre lo que ocurre.

IT WAS THE BEST OF TIMES, IT WAS THE WORST OF TIMES,
IT WAS THE AGE OF WISDOM, IT WAS THE AGE OF FOOLISHNESS,
IT WAS THE EPOCH OF BELIEF, IT WAS THE EPOCH OF INCREDULITY,
IT WAS THE SEASON OF LIGHT, IT WAS THE SEASON OF DARKNESS,
IT WAS THE SPRING OF HOPE, IT WAS THE WINTER OF DESPAIR,
WE HAD EVERYTHING BEFORE US, WE HAD NOTHING BEFORE US,
WE WERE ALL GOING DIRECT TO HEAVEN, WE WERE ALL GOING DIRECT THE OTHER WAY
– IN SHORT, THE PERIOD WAS SO FAR LIKE THE PRESENT PERIOD, THAT SOME OF ITS NOISIEST AUTHORITIES INSISTED ON ITS BEING RECEIVED, FOR GOOD OR FOR EVIL, IN THE SUPERLATIVE DEGREE OF COMPARISON ONLY.

El idioma que detectó Lequel fue afrikáans.
El texto se encuentra completamente en mayúsculas y contiene puntuación extensa. Esta forma altera la frecuencia de trigramas comparada con un corpus de inglés en minúsculas, sobre el cual el detector fue entrenado. La modificación en la distribución de trigramas puede provocar que el modelo interprete mayor similitud con otro idioma que comparte combinaciones de letras semejantes, en este caso afrikáans. Este fallo evidencia la sensibilidad del método de trigramas ante la capitalización y el uso de puntuación.

## Bonus points

Se crearon perfiles de trigramas para los idiomas guaraní, catalán y asturiano a partir de sus respectivos corpus en UTF-8. Cada perfil se almacenó en la carpeta trigrams y los códigos de idioma se añadieron a languagecode_names_es.csv, permitiendo identificar correctamente los textos en estas lenguas.
Además, se generaron perfiles para los lenguajes de programación C, C++ y Python. No obstante, debido a la gran similitud entre sus estructuras y sintaxis, el sistema no podía distinguirlos de manera consistente. De esta forma, al analizar un código fuente, se podía determinar que correspondía a algún lenguaje computacional, pero la identificación oscilaba entre estas tres opciones sin una diferenciación inequívoca. Debido a esta falla, terminamos optando por no incluirlos.

Se opto por iterar de forma nativa el texto UTF-8 para evitar la constante conversion de Unicode a wstring y de wstring a string para optimizar el procedimiento.
Se cambiaron los map por unordered_map para incrementar la velocidad de acceso de elementos.
Se agregaron restricciones y una configuracion que puede modificarse a traves de la interfaz grafica. Permite imponer un limite de trigramas a procesar y de lineas a leer para reducir el tiempo, aunque puede disminuir la precision.
Se agregaron 2 nuevos algoritmos de similitud: Similitud de Jaccard Ponderada y Similitud de Cavnart Trenkle (Ver lequel.cpp para citas a articulos), para comparar las velocidades y precisiones de los 3 modelos. Si bien el algoritmo de Jaccard, en papel, parece mejor que la Similitud Coseno, al no estar en codiciones favorables en este codigo, resulto ser el mas lento e impreciso de los 3, sin embargo, en situaciones donde hay mucho mas texto, logra demostrar una buena relacion precision/performance. Cavnart Trenkle, por otro lado, resulto ser muy preciso y rapido, posiblemente incluso mejor que coseno con textos cortos.
Mediante un define en lequel.h (NORMAL_TOGGLE_ENABLE), se puede intercambiar la barra de limite de trigramas por un toggle entre usar frecuencias absolutas o normalizadas. Si bien en similitud coseno estan fijos en normalizados, cabe destacar que en ciertas condiciones, los otros 2 algoritmos pueden funcionar sin necesidad de normalizar las frecuencias. Esto implica tambien mantener 2 valores por trigrama correspondiente a las frecuencias absolutas o normalizadas, que ocupan mas espacio. Por eso se lo dejo detras de un define, no genero una ganancia importante y la perdida de precision (a pesar que en ciertas condiciones no pasa) hace que no valga la pena mantener activo dicha configuracion. Puede descomentarse la linea para habilitar la funcion, ya que aun asi funciona correctamente.
Se dividio la carga de texto segun si proviene de la "clipboard" o de un archivo. Cabe mencionar que la forma del archivo produce un cuello de botella al copiar strings que representan cada linea para iterar linea por linea. El metodo de "clipboard" por otra parte no sufre de dicho inconveniente.
Se agregaron timers en el programa, para medir el tiempo que le toma al mismo procesar e identificar una porcion de texto. Permite diferenciar visualmente las diferencias que se obtienen de modificar las distintas opciones que ofrece la interfaz grafica.
La velocidad del programa resulta variable segun los parametros que inserte el usuario. Para analisis mas rapidos se prefiere la similitud Cavnart Trenkle con 20-50 trigramas y 10-30 lineas (aunque ha logrado identificar lenguajes en condiciones mucho mas extremas, como 10 trigramas y 3 lineas). Velocidades medias (aunque no tan distantes de Cavnart) pueden verse con la similitud coseno con 50-200 trigramas y +30 lineas. Por ultimo, si se opta por el metodo de Jaccard, se recomiendan +100 trigramas y +30 lineas, ya que suele presentar comportamientos erraticos y suele requerir de mucha mas informacion para llegar a una buena conclusion.
